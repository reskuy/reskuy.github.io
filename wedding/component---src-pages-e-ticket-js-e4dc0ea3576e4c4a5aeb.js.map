{"version":3,"sources":["webpack:///./src/components/Ticket/styles.js","webpack:///./src/components/Ticket/index.js","webpack:///./src/hooks/useConfigData.js","webpack:///./src/pages/e-ticket.js","webpack:///./src/helpers/getQueryValue.js"],"names":["styWrapper","styTicket","TicketData","guest","configData","css","class","id","value","code","size","name","desc","shiftType","shift","isAttended","attendedAt","isExchanged","exchangedAt","style","paddingLeft","textTransform","color","to","className","defaultProps","useConfigData","useState","loading","setLoading","data","setData","handleFetch","a","offlineConfigData","console","error","useEffect","refetch","ETicket","location","codeEticket","getQueryValue","nameEticket","alreadyChecked","useRef","setValue","selectedGuest","setSelectedGuest","isShowTicket","setIsShowTicket","useGuestData","handleCheckTicket","useCallback","tempValue","guestCode","toUpperCase","find","g","includes","alert","window","assign","length","current","setTimeout","Ticket","fontSize","testedName","replace","results","RegExp","exec","search","decodeURIComponent"],"mappings":"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","file":"component---src-pages-e-ticket-js-e4dc0ea3576e4c4a5aeb.js","sourcesContent":["import { css } from '@emotion/core';\n\nexport const styWrapper = css`\n  @import url('https://fonts.googleapis.com/css?family=Roboto:300,400');\n\n  .container {\n    margin: 30px auto;\n    overflow: hidden;\n    box-shadow: 0 0 10px rgb(202, 202, 204);\n    background-color: ;\n    border-radius: 2px;\n    padding: 0 16px;\n  }\n\n  .ticket {\n    display: flex;\n\n    #qrcode {\n      justify-content: center;\n      align-content: center;\n      margin: 12px auto;\n    }\n  }\n\n  .details {\n    color: #828282;\n    padding: 16px 0;\n    border-top: 1px dashed #c3c3c3;\n  }\n\n  .tinfo {\n    font-size: 10px;\n    font-weight: 300;\n    color: #555;\n    font-family: 'Roboto', sans-serif;\n    text-transform: uppercase;\n    letter-spacing: 1px;\n    margin: 16px 0 0 0;\n  }\n\n  .tdata {\n    font-size: 1em;\n    font-weight: 400;\n    font-family: 'Roboto', sans-serif;\n    letter-spacing: 0.5px;\n    margin: 0;\n  }\n\n  .additional {\n    font-size: 10px;\n  }\n\n  .name {\n    font-size: 1.3em;\n    font-weight: 500;\n  }\n\n  .masinfo {\n    display: block;\n  }\n  .left,\n  .right {\n    width: 49%;\n    display: inline-table;\n  }\n\n  .nesp {\n    letter-spacing: 0px;\n  }\n\n  .btn {\n    margin-right: 4px;\n    margin-bottom: 4px;\n    font-family: 'Work Sans', Arial, sans-serif;\n    font-size: 12px;\n    font-weight: 400;\n    border-radius: 30px;\n    transition: 0.5s;\n    padding: 8px 20px;\n  }\n\n  .primary {\n    background: #f14e95;\n    color: #fff;\n    border: none;\n  }\n`;\n\nexport const styTicket = css`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: calc(100vh - 18px);\n  padding: 0 20px;\n\n  .homepage {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    max-width: 100%;\n  }\n\n  .title {\n    font-family: 'Cookie', cursive;\n    font-weight: 600;\n    letter-spacing: 4px;\n    font-size: 45px;\n    user-select: none;\n    margin-top: 20px;\n    text-align: center;\n  }\n\n  .sub-title-ticket {\n    font-weight: 500;\n    text-transform: uppercase;\n    letter-spacing: 1px;\n    font-size: 1.7rem;\n    user-select: none;\n    margin-top: 20px;\n    text-align: center;\n  }\n\n  .input-ticket {\n    width: 85vw;\n    min-width: auto;\n\n    input {\n      font-family: 'Work Sans', Courier, monospace;\n      font-size: 18px;\n      width: 100%;\n      text-align: center;\n      border-radius: 12px;\n      padding: 10px 30px 10px 10px;\n      background: transparent;\n      border: 0.5px solid rgba(0, 0, 0, 0.3);\n    }\n\n    input[type='text']:disabled {\n      background: #dddddd;\n    }\n  }\n`;\n","import React from 'react';\nimport QRCode from 'react-qr-code';\nimport { object } from 'prop-types';\nimport { Link } from 'gatsby';\n\nimport { styWrapper } from './styles';\n\nfunction TicketData({ guest, configData }) {\n  return (\n    <div css={styWrapper}>\n      <div class=\"container\">\n        <div class=\"ticket\">\n          <div id=\"qrcode\">\n            <QRCode value={guest.code} size={250} />\n          </div>\n        </div>\n        <div class=\"details\">\n          <div class=\"tinfo\">Nama</div>\n          <div class=\"tdata name\">{guest.name}</div>\n          <div class=\"tinfo\">Keterangan</div>\n          <div class=\"tdata\">{guest.desc}</div>\n          <div class=\"tinfo\">Syukuran Pernikahan / Shift</div>\n          <div class=\"tdata\">\n            {`${configData.shiftType?.[guest.shift]} / ${guest.shift}` || '11.00 WIB - 13.00 WIB'}\n          </div>\n          {/* attendance */}\n          {guest.isAttended ? (\n            <>\n              <div class=\"tinfo\">Sudah hadir pada</div>\n              <div class=\"tdata\">\n                <span class=\"badge badge-success\">{guest.attendedAt}</span>\n              </div>\n            </>\n          ) : null}\n          {/** souvenir */}\n          {guest.isExchanged ? (\n            <>\n              <div class=\"tinfo\">Sudah menukarkan souvenir pada</div>\n              <div class=\"tdata\">\n                <span class=\"badge badge-success\">{guest.exchangedAt}</span>\n              </div>\n            </>\n          ) : null}\n          {/* Additional info */}\n          <div class=\"tinfo\">Penting</div>\n          <div class=\"tdata additional\">\n            <ul style={{ paddingLeft: '16px' }}>\n              <li>\n                {`Setiap tamu yang hadir wajib menunjukkan QRCode ini sebagai pengganti buku tamu untuk untuk meminimalisir kontak fisik melalui pena.`}\n              </li>\n              <li style={{ textTransform: 'uppercase' }}>\n                Dalam rangka mematuhi protokol kesehatan,\n                <span style={{ color: '#f14e95', textTransform: 'uppercase' }}>\n                  {` 1 undangan hanya berlaku untuk 2 orang tamu`}\n                </span>\n              </li>\n            </ul>\n            <br />\n          </div>\n        </div>\n      </div>\n      <Link to={`/?type=invitation&to=${guest.name}&code=${guest.code}`}>\n        <button className=\"btn primary\">{`< Kembali ke Homepage`}</button>\n      </Link>\n    </div>\n  );\n}\n\nTicketData.propTypes = {\n  guest: object,\n  configData: object,\n};\n\nTicketData.defaultProps = {\n  guest: {},\n  configData: {},\n};\n\nexport default TicketData;\n","import { useState, useEffect } from 'react';\nimport offlineConfigData from '../../api/shift.json';\n\nfunction useConfigData() {\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState({});\n\n  const handleFetch = async () => {\n    setLoading(true);\n\n    try {\n      setData(offlineConfigData || {});\n      setLoading(false);\n    } catch {\n      console.error('ERR_WHEN_HIT_DATA');\n      setData({});\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    handleFetch();\n  }, []);\n\n  return { data, loading, refetch: handleFetch };\n}\n\nexport default useConfigData;\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\n\nimport MainLayout from '@components/Layout';\nimport Ticket from '@components/Ticket';\n\nimport getQueryValue from '@helpers/getQueryValue';\nimport useGuestData from '@/hooks/useGuestData';\nimport useConfigData from '@/hooks/useConfigData';\nimport { styTicket } from '@components/Ticket/styles';\n\nfunction ETicket({ location }) {\n  const codeEticket = getQueryValue(location, 'code') || '';\n  const nameEticket = getQueryValue(location, 'name') || '';\n  const alreadyChecked = useRef(false);\n\n  const [value, setValue] = useState('');\n  const [selectedGuest, setSelectedGuest] = useState({});\n  const [isShowTicket, setIsShowTicket] = useState(false);\n\n  const { data, loading } = useGuestData();\n  const { data: configData } = useConfigData();\n\n  const handleCheckTicket = useCallback(\n    (tempValue) => {\n      const guestCode = (tempValue || value).toUpperCase();\n      const guest = data.find((g) => (g.code || '').toUpperCase() === guestCode);\n\n      if (guest) {\n        if (guest.name.toUpperCase().includes(nameEticket.toUpperCase())) {\n          setSelectedGuest(guest);\n          setIsShowTicket(true);\n          return;\n        }\n      }\n\n      alert(`Maaf, Kode data ${guestCode} tidak ditemukan. Mohon di cek lagi..`);\n      window.location.assign('https://TheReski.com');\n    },\n    [data, nameEticket, value],\n  );\n  /**\n   * Effect to autu-check code ticket\n   */\n  useEffect(() => {\n    if (codeEticket !== '' && data.length > 0 && !alreadyChecked.current) {\n      alreadyChecked.current = true;\n      setValue(codeEticket);\n      setTimeout(() => {\n        handleCheckTicket(codeEticket);\n      }, 1000);\n    }\n  }, [codeEticket, data.length, handleCheckTicket, loading]);\n\n  return (\n    <MainLayout>\n      <div css={styTicket}>\n        <div className=\"homepage\">\n          {isShowTicket ? (\n            <Ticket guest={selectedGuest} configData={configData} />\n          ) : (\n            <h3 style={{ fontSize: '1.7rem' }}>🧑‍💻Validasi data tamu.. Mohon tunggu..</h3>\n          )}\n        </div>\n      </div>\n    </MainLayout>\n  );\n}\n\nexport default ETicket;\n","export default function getQueryValue(location, name) {\n  const testedName = name.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  const regex = new RegExp(`[\\\\?&]${testedName}=([^&#]*)`);\n  const results = regex.exec(location.search);\n\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}"],"sourceRoot":""}